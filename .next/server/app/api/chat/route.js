/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fclaraeverett%2FDesktop%2Fperplexity%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fclaraeverett%2FDesktop%2Fperplexity&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fclaraeverett%2FDesktop%2Fperplexity%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fclaraeverett%2FDesktop%2Fperplexity&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_claraeverett_Desktop_perplexity_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/chat/route.ts */ \"(rsc)/./src/app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"/Users/claraeverett/Desktop/perplexity/src/app/api/chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_claraeverett_Desktop_perplexity_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmNsYXJhZXZlcmV0dCUyRkRlc2t0b3AlMkZwZXJwbGV4aXR5JTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmNsYXJhZXZlcmV0dCUyRkRlc2t0b3AlMkZwZXJwbGV4aXR5JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNnQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2NsYXJhZXZlcmV0dC9EZXNrdG9wL3BlcnBsZXhpdHkvc3JjL2FwcC9hcGkvY2hhdC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NoYXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvY2xhcmFldmVyZXR0L0Rlc2t0b3AvcGVycGxleGl0eS9zcmMvYXBwL2FwaS9jaGF0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fclaraeverett%2FDesktop%2Fperplexity%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fclaraeverett%2FDesktop%2Fperplexity&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/chat/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/chat/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/openai */ \"(rsc)/./src/lib/openai.ts\");\n/* harmony import */ var _lib_pinecone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/pinecone */ \"(rsc)/./src/lib/pinecone.ts\");\n\n\n\nconst SYSTEM_PROMPT = `You are a research assistant analyzing scientific papers. \nProvide clear insights and connections between papers. Focus on:\n- Key findings and contributions\n- Relationships between papers\n- Research implications\n- Potential future directions\n\nBase your analysis only on the provided papers and their content.`;\nasync function POST(req) {\n    try {\n        const { query } = await req.json();\n        // Search vector store\n        const searchResults = await (0,_lib_pinecone__WEBPACK_IMPORTED_MODULE_2__.queryVectorStore)(query, 5);\n        if (!searchResults.length) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'No relevant papers found for your query'\n            }, {\n                status: 404\n            });\n        }\n        // Format papers for GPT\n        const papers = searchResults.map((result)=>{\n            if (!result.metadata) {\n                throw new Error('Paper metadata is missing');\n            }\n            // Ensure we have a valid URL for the paper\n            let paperUrl = result.metadata.url;\n            if (!paperUrl && result.metadata.paperId) {\n                // If we have a paperId but no URL, construct the arXiv URL\n                paperUrl = `https://arxiv.org/abs/${result.metadata.paperId}`;\n            } else if (!paperUrl) {\n                // If we have neither, create a search URL\n                paperUrl = `https://arxiv.org/search/?query=${encodeURIComponent(result.metadata.title)}&searchtype=title`;\n            }\n            return {\n                id: result.metadata.paperId || '',\n                url: paperUrl,\n                title: result.metadata.title,\n                authors: result.metadata.authors,\n                summary: result.metadata.summary,\n                content: result.metadata.content,\n                categories: result.metadata.categories,\n                published: result.metadata.published\n            };\n        });\n        // Generate research insight using GPT-4\n        const completion = await _lib_openai__WEBPACK_IMPORTED_MODULE_1__.openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: SYSTEM_PROMPT\n                },\n                {\n                    role: \"user\",\n                    content: `Research Query: ${query}\\n\\nPapers:\\n${JSON.stringify(papers, null, 2)}`\n                }\n            ],\n            temperature: 0.7\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            answer: completion.choices[0].message.content,\n            papers: papers.map((paper)=>({\n                    id: paper.id,\n                    url: paper.url,\n                    title: paper.title,\n                    abstract: paper.summary,\n                    authors: paper.authors,\n                    categories: paper.categories,\n                    published: paper.published\n                }))\n        });\n    } catch (error) {\n        console.error('API Error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : 'Failed to process research query'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qk0sUUFBUU4sTUFBTThCLE9BQU8sR0FBRztRQUFtQyxHQUNyRjtZQUFFN0IsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9jbGFyYWV2ZXJldHQvRGVza3RvcC9wZXJwbGV4aXR5L3NyYy9hcHAvYXBpL2NoYXQvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgb3BlbmFpIH0gZnJvbSAnQC9saWIvb3BlbmFpJztcbmltcG9ydCB7IHF1ZXJ5VmVjdG9yU3RvcmUgfSBmcm9tICdAL2xpYi9waW5lY29uZSc7XG5cbmNvbnN0IFNZU1RFTV9QUk9NUFQgPSBgWW91IGFyZSBhIHJlc2VhcmNoIGFzc2lzdGFudCBhbmFseXppbmcgc2NpZW50aWZpYyBwYXBlcnMuIFxuUHJvdmlkZSBjbGVhciBpbnNpZ2h0cyBhbmQgY29ubmVjdGlvbnMgYmV0d2VlbiBwYXBlcnMuIEZvY3VzIG9uOlxuLSBLZXkgZmluZGluZ3MgYW5kIGNvbnRyaWJ1dGlvbnNcbi0gUmVsYXRpb25zaGlwcyBiZXR3ZWVuIHBhcGVyc1xuLSBSZXNlYXJjaCBpbXBsaWNhdGlvbnNcbi0gUG90ZW50aWFsIGZ1dHVyZSBkaXJlY3Rpb25zXG5cbkJhc2UgeW91ciBhbmFseXNpcyBvbmx5IG9uIHRoZSBwcm92aWRlZCBwYXBlcnMgYW5kIHRoZWlyIGNvbnRlbnQuYDtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBxdWVyeSB9ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBcbiAgICAvLyBTZWFyY2ggdmVjdG9yIHN0b3JlXG4gICAgY29uc3Qgc2VhcmNoUmVzdWx0cyA9IGF3YWl0IHF1ZXJ5VmVjdG9yU3RvcmUocXVlcnksIDUpO1xuICAgIFxuICAgIGlmICghc2VhcmNoUmVzdWx0cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05vIHJlbGV2YW50IHBhcGVycyBmb3VuZCBmb3IgeW91ciBxdWVyeScgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBwYXBlcnMgZm9yIEdQVFxuICAgIGNvbnN0IHBhcGVycyA9IHNlYXJjaFJlc3VsdHMubWFwKHJlc3VsdCA9PiB7XG4gICAgICBpZiAoIXJlc3VsdC5tZXRhZGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcGVyIG1ldGFkYXRhIGlzIG1pc3NpbmcnKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgYSB2YWxpZCBVUkwgZm9yIHRoZSBwYXBlclxuICAgICAgbGV0IHBhcGVyVXJsID0gcmVzdWx0Lm1ldGFkYXRhLnVybDtcbiAgICAgIGlmICghcGFwZXJVcmwgJiYgcmVzdWx0Lm1ldGFkYXRhLnBhcGVySWQpIHtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIHBhcGVySWQgYnV0IG5vIFVSTCwgY29uc3RydWN0IHRoZSBhclhpdiBVUkxcbiAgICAgICAgcGFwZXJVcmwgPSBgaHR0cHM6Ly9hcnhpdi5vcmcvYWJzLyR7cmVzdWx0Lm1ldGFkYXRhLnBhcGVySWR9YDtcbiAgICAgIH0gZWxzZSBpZiAoIXBhcGVyVXJsKSB7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgbmVpdGhlciwgY3JlYXRlIGEgc2VhcmNoIFVSTFxuICAgICAgICBwYXBlclVybCA9IGBodHRwczovL2FyeGl2Lm9yZy9zZWFyY2gvP3F1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHJlc3VsdC5tZXRhZGF0YS50aXRsZSl9JnNlYXJjaHR5cGU9dGl0bGVgO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcmVzdWx0Lm1ldGFkYXRhLnBhcGVySWQgfHwgJycsXG4gICAgICAgIHVybDogcGFwZXJVcmwsXG4gICAgICAgIHRpdGxlOiByZXN1bHQubWV0YWRhdGEudGl0bGUsXG4gICAgICAgIGF1dGhvcnM6IHJlc3VsdC5tZXRhZGF0YS5hdXRob3JzLFxuICAgICAgICBzdW1tYXJ5OiByZXN1bHQubWV0YWRhdGEuc3VtbWFyeSxcbiAgICAgICAgY29udGVudDogcmVzdWx0Lm1ldGFkYXRhLmNvbnRlbnQsXG4gICAgICAgIGNhdGVnb3JpZXM6IHJlc3VsdC5tZXRhZGF0YS5jYXRlZ29yaWVzLFxuICAgICAgICBwdWJsaXNoZWQ6IHJlc3VsdC5tZXRhZGF0YS5wdWJsaXNoZWRcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBHZW5lcmF0ZSByZXNlYXJjaCBpbnNpZ2h0IHVzaW5nIEdQVC00XG4gICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogXCJncHQtNFwiLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBTWVNURU1fUFJPTVBUIH0sXG4gICAgICAgIHsgXG4gICAgICAgICAgcm9sZTogXCJ1c2VyXCIsIFxuICAgICAgICAgIGNvbnRlbnQ6IGBSZXNlYXJjaCBRdWVyeTogJHtxdWVyeX1cXG5cXG5QYXBlcnM6XFxuJHtKU09OLnN0cmluZ2lmeShwYXBlcnMsIG51bGwsIDIpfWAgXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0ZW1wZXJhdHVyZTogMC43XG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgYW5zd2VyOiBjb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50LFxuICAgICAgcGFwZXJzOiBwYXBlcnMubWFwKHBhcGVyID0+ICh7XG4gICAgICAgIGlkOiBwYXBlci5pZCxcbiAgICAgICAgdXJsOiBwYXBlci51cmwsXG4gICAgICAgIHRpdGxlOiBwYXBlci50aXRsZSxcbiAgICAgICAgYWJzdHJhY3Q6IHBhcGVyLnN1bW1hcnksXG4gICAgICAgIGF1dGhvcnM6IHBhcGVyLmF1dGhvcnMsXG4gICAgICAgIGNhdGVnb3JpZXM6IHBhcGVyLmNhdGVnb3JpZXMsXG4gICAgICAgIHB1Ymxpc2hlZDogcGFwZXIucHVibGlzaGVkXG4gICAgICB9KSlcbiAgICB9KTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBUEkgRXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBwcm9jZXNzIHJlc2VhcmNoIHF1ZXJ5JyB9LCBcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwib3BlbmFpIiwicXVlcnlWZWN0b3JTdG9yZSIsIlNZU1RFTV9QUk9NUFQiLCJQT1NUIiwicmVxIiwicXVlcnkiLCJqc29uIiwic2VhcmNoUmVzdWx0cyIsImxlbmd0aCIsImVycm9yIiwic3RhdHVzIiwicGFwZXJzIiwibWFwIiwicmVzdWx0IiwibWV0YWRhdGEiLCJFcnJvciIsInBhcGVyVXJsIiwidXJsIiwicGFwZXJJZCIsImVuY29kZVVSSUNvbXBvbmVudCIsInRpdGxlIiwiaWQiLCJhdXRob3JzIiwic3VtbWFyeSIsImNvbnRlbnQiLCJjYXRlZ29yaWVzIiwicHVibGlzaGVkIiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiSlNPTiIsInN0cmluZ2lmeSIsInRlbXBlcmF0dXJlIiwiYW5zd2VyIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJwYXBlciIsImFic3RyYWN0IiwiY29uc29sZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/openai.ts":
/*!***************************!*\
  !*** ./src/lib/openai.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   openai: () => (/* binding */ openai)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (openai);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL29wZW5haS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEI7QUFFckIsTUFBTUMsU0FBUyxJQUFJRCw4Q0FBTUEsQ0FBQztJQUMvQkUsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0FBQ3BDLEdBQUc7QUFFSCxpRUFBZUosTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2NsYXJhZXZlcmV0dC9EZXNrdG9wL3BlcnBsZXhpdHkvc3JjL2xpYi9vcGVuYWkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknO1xuXG5leHBvcnQgY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgb3BlbmFpOyJdLCJuYW1lcyI6WyJPcGVuQUkiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/openai.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/pinecone.ts":
/*!*****************************!*\
  !*** ./src/lib/pinecone.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   indexArxivPaper: () => (/* binding */ indexArxivPaper),\n/* harmony export */   initializeIndex: () => (/* binding */ initializeIndex),\n/* harmony export */   queryVectorStore: () => (/* binding */ queryVectorStore)\n/* harmony export */ });\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @pinecone-database/pinecone */ \"(rsc)/./node_modules/@pinecone-database/pinecone/dist/index.js\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _langchain_openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/openai */ \"(rsc)/./node_modules/@langchain/openai/index.js\");\n\n\n\n// Load environment variables from .env.local\ndotenv__WEBPACK_IMPORTED_MODULE_0__.config({\n    path: '.env.local'\n});\nif (!process.env.PINECONE_API_KEY) {\n    throw new Error('Missing PINECONE_API_KEY environment variable');\n}\nif (!process.env.OPENAI_API_KEY) {\n    throw new Error('Missing OPENAI_API_KEY environment variable');\n}\nconst PINECONE_INDEX_NAME = 'perplexity';\n// Initialize Pinecone client\nconst pinecone = new _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1__.Pinecone({\n    apiKey: process.env.PINECONE_API_KEY\n});\n// Initialize OpenAI embeddings\nconst embeddings = new _langchain_openai__WEBPACK_IMPORTED_MODULE_2__.OpenAIEmbeddings({\n    openAIApiKey: process.env.OPENAI_API_KEY\n});\nconst wait = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nasync function waitForIndex(index, maxRetries = 5) {\n    for(let i = 0; i < maxRetries; i++){\n        try {\n            // Try a simple describe operation to check if the index is ready\n            await index.describeIndexStats();\n            return;\n        } catch (error) {\n            if (i === maxRetries - 1) throw error;\n            // Exponential backoff: 1s, 2s, 4s, 8s, 16s\n            const delay = Math.pow(2, i) * 1000;\n            console.log(`Index not ready, retrying in ${delay}ms...`);\n            await wait(delay);\n        }\n    }\n}\nasync function initializeIndex() {\n    const indexList = await pinecone.listIndexes();\n    if (!indexList.indexes?.find((index)=>index.name === PINECONE_INDEX_NAME)) {\n        await pinecone.createIndex({\n            name: PINECONE_INDEX_NAME,\n            dimension: 1536,\n            metric: 'cosine',\n            spec: {\n                serverless: {\n                    cloud: 'aws',\n                    region: 'us-west-2'\n                }\n            }\n        });\n        console.log('Created new Pinecone index:', PINECONE_INDEX_NAME);\n    }\n    const index = pinecone.Index(PINECONE_INDEX_NAME);\n    await waitForIndex(index);\n    return index;\n}\nasync function indexArxivPaper(content, metadata) {\n    const index = await initializeIndex();\n    const embedding = await embeddings.embedQuery(content);\n    await index.upsert([\n        {\n            id: metadata.paperId,\n            values: embedding,\n            metadata: {\n                ...metadata,\n                content\n            }\n        }\n    ]);\n}\nasync function queryVectorStore(query, topK = 3) {\n    const index = await initializeIndex();\n    const queryEmbedding = await embeddings.embedQuery(query);\n    const results = await index.query({\n        vector: queryEmbedding,\n        topK,\n        includeMetadata: true\n    });\n    return results.matches || [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3BpbmVjb25lLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWlDO0FBQ3NCO0FBQ0Y7QUFFckQsNkNBQTZDO0FBQzdDQSwwQ0FBYSxDQUFDO0lBQUVJLE1BQU07QUFBYTtBQUVuQyxJQUFJLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0JBQWdCLEVBQUU7SUFDakMsTUFBTSxJQUFJQyxNQUFNO0FBQ2xCO0FBRUEsSUFBSSxDQUFDSCxRQUFRQyxHQUFHLENBQUNHLGNBQWMsRUFBRTtJQUMvQixNQUFNLElBQUlELE1BQU07QUFDbEI7QUFFQSxNQUFNRSxzQkFBc0I7QUFFNUIsNkJBQTZCO0FBQzdCLE1BQU1DLFdBQVcsSUFBSVYsaUVBQVFBLENBQUM7SUFDNUJXLFFBQVFQLFFBQVFDLEdBQUcsQ0FBQ0MsZ0JBQWdCO0FBQ3RDO0FBRUEsK0JBQStCO0FBQy9CLE1BQU1NLGFBQWEsSUFBSVgsK0RBQWdCQSxDQUFDO0lBQ3RDWSxjQUFjVCxRQUFRQyxHQUFHLENBQUNHLGNBQWM7QUFDMUM7QUFFQSxNQUFNTSxPQUFPLENBQUNDLEtBQWUsSUFBSUMsUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBU0Y7QUFFeEUsZUFBZUksYUFBYUMsS0FBVSxFQUFFQyxhQUFhLENBQUM7SUFDcEQsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlELFlBQVlDLElBQUs7UUFDbkMsSUFBSTtZQUNGLGlFQUFpRTtZQUNqRSxNQUFNRixNQUFNRyxrQkFBa0I7WUFDOUI7UUFDRixFQUFFLE9BQU9DLE9BQVk7WUFDbkIsSUFBSUYsTUFBTUQsYUFBYSxHQUFHLE1BQU1HO1lBQ2hDLDJDQUEyQztZQUMzQyxNQUFNQyxRQUFRQyxLQUFLQyxHQUFHLENBQUMsR0FBR0wsS0FBSztZQUMvQk0sUUFBUUMsR0FBRyxDQUFDLENBQUMsNkJBQTZCLEVBQUVKLE1BQU0sS0FBSyxDQUFDO1lBQ3hELE1BQU1YLEtBQUtXO1FBQ2I7SUFDRjtBQUNGO0FBRU8sZUFBZUs7SUFDcEIsTUFBTUMsWUFBWSxNQUFNckIsU0FBU3NCLFdBQVc7SUFFNUMsSUFBSSxDQUFDRCxVQUFVRSxPQUFPLEVBQUVDLEtBQUtkLENBQUFBLFFBQVNBLE1BQU1lLElBQUksS0FBSzFCLHNCQUFzQjtRQUN6RSxNQUFNQyxTQUFTMEIsV0FBVyxDQUFDO1lBQ3pCRCxNQUFNMUI7WUFDTjRCLFdBQVc7WUFDWEMsUUFBUTtZQUNSQyxNQUFNO2dCQUNKQyxZQUFZO29CQUNWQyxPQUFPO29CQUNQQyxRQUFRO2dCQUNWO1lBQ0Y7UUFDRjtRQUNBZCxRQUFRQyxHQUFHLENBQUMsK0JBQStCcEI7SUFDN0M7SUFFQSxNQUFNVyxRQUFRVixTQUFTaUMsS0FBSyxDQUFDbEM7SUFDN0IsTUFBTVUsYUFBYUM7SUFDbkIsT0FBT0E7QUFDVDtBQVlPLGVBQWV3QixnQkFBZ0JDLE9BQWUsRUFBRUMsUUFBdUI7SUFDNUUsTUFBTTFCLFFBQVEsTUFBTVU7SUFDcEIsTUFBTWlCLFlBQVksTUFBTW5DLFdBQVdvQyxVQUFVLENBQUNIO0lBRTlDLE1BQU16QixNQUFNNkIsTUFBTSxDQUFDO1FBQUM7WUFDbEJDLElBQUlKLFNBQVNLLE9BQU87WUFDcEJDLFFBQVFMO1lBQ1JELFVBQVU7Z0JBQ1IsR0FBR0EsUUFBUTtnQkFDWEQ7WUFDRjtRQUNGO0tBQUU7QUFDSjtBQUVPLGVBQWVRLGlCQUFpQkMsS0FBYSxFQUFFQyxPQUFlLENBQUM7SUFDcEUsTUFBTW5DLFFBQVEsTUFBTVU7SUFDcEIsTUFBTTBCLGlCQUFpQixNQUFNNUMsV0FBV29DLFVBQVUsQ0FBQ007SUFFbkQsTUFBTUcsVUFBVSxNQUFNckMsTUFBTWtDLEtBQUssQ0FBQztRQUNoQ0ksUUFBUUY7UUFDUkQ7UUFDQUksaUJBQWlCO0lBQ25CO0lBRUEsT0FBT0YsUUFBUUcsT0FBTyxJQUFJLEVBQUU7QUFDOUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9jbGFyYWV2ZXJldHQvRGVza3RvcC9wZXJwbGV4aXR5L3NyYy9saWIvcGluZWNvbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgeyBQaW5lY29uZSB9IGZyb20gJ0BwaW5lY29uZS1kYXRhYmFzZS9waW5lY29uZSc7XG5pbXBvcnQgeyBPcGVuQUlFbWJlZGRpbmdzIH0gZnJvbSAnQGxhbmdjaGFpbi9vcGVuYWknO1xuXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIC5lbnYubG9jYWxcbmRvdGVudi5jb25maWcoeyBwYXRoOiAnLmVudi5sb2NhbCcgfSk7XG5cbmlmICghcHJvY2Vzcy5lbnYuUElORUNPTkVfQVBJX0tFWSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgUElORUNPTkVfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xufVxuXG5pZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPUEVOQUlfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xufVxuXG5jb25zdCBQSU5FQ09ORV9JTkRFWF9OQU1FID0gJ3BlcnBsZXhpdHknO1xuXG4vLyBJbml0aWFsaXplIFBpbmVjb25lIGNsaWVudFxuY29uc3QgcGluZWNvbmUgPSBuZXcgUGluZWNvbmUoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52LlBJTkVDT05FX0FQSV9LRVksXG59KTtcblxuLy8gSW5pdGlhbGl6ZSBPcGVuQUkgZW1iZWRkaW5nc1xuY29uc3QgZW1iZWRkaW5ncyA9IG5ldyBPcGVuQUlFbWJlZGRpbmdzKHtcbiAgb3BlbkFJQXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcbn0pO1xuXG5jb25zdCB3YWl0ID0gKG1zOiBudW1iZXIpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9ySW5kZXgoaW5kZXg6IGFueSwgbWF4UmV0cmllcyA9IDUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhSZXRyaWVzOyBpKyspIHtcbiAgICB0cnkge1xuICAgICAgLy8gVHJ5IGEgc2ltcGxlIGRlc2NyaWJlIG9wZXJhdGlvbiB0byBjaGVjayBpZiB0aGUgaW5kZXggaXMgcmVhZHlcbiAgICAgIGF3YWl0IGluZGV4LmRlc2NyaWJlSW5kZXhTdGF0cygpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGlmIChpID09PSBtYXhSZXRyaWVzIC0gMSkgdGhyb3cgZXJyb3I7XG4gICAgICAvLyBFeHBvbmVudGlhbCBiYWNrb2ZmOiAxcywgMnMsIDRzLCA4cywgMTZzXG4gICAgICBjb25zdCBkZWxheSA9IE1hdGgucG93KDIsIGkpICogMTAwMDtcbiAgICAgIGNvbnNvbGUubG9nKGBJbmRleCBub3QgcmVhZHksIHJldHJ5aW5nIGluICR7ZGVsYXl9bXMuLi5gKTtcbiAgICAgIGF3YWl0IHdhaXQoZGVsYXkpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUluZGV4KCkge1xuICBjb25zdCBpbmRleExpc3QgPSBhd2FpdCBwaW5lY29uZS5saXN0SW5kZXhlcygpO1xuICBcbiAgaWYgKCFpbmRleExpc3QuaW5kZXhlcz8uZmluZChpbmRleCA9PiBpbmRleC5uYW1lID09PSBQSU5FQ09ORV9JTkRFWF9OQU1FKSkge1xuICAgIGF3YWl0IHBpbmVjb25lLmNyZWF0ZUluZGV4KHtcbiAgICAgIG5hbWU6IFBJTkVDT05FX0lOREVYX05BTUUsXG4gICAgICBkaW1lbnNpb246IDE1MzYsIC8vIE9wZW5BSSBlbWJlZGRpbmdzIGRpbWVuc2lvblxuICAgICAgbWV0cmljOiAnY29zaW5lJyxcbiAgICAgIHNwZWM6IHtcbiAgICAgICAgc2VydmVybGVzczoge1xuICAgICAgICAgIGNsb3VkOiAnYXdzJyxcbiAgICAgICAgICByZWdpb246ICd1cy13ZXN0LTInXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnQ3JlYXRlZCBuZXcgUGluZWNvbmUgaW5kZXg6JywgUElORUNPTkVfSU5ERVhfTkFNRSk7XG4gIH1cbiAgXG4gIGNvbnN0IGluZGV4ID0gcGluZWNvbmUuSW5kZXgoUElORUNPTkVfSU5ERVhfTkFNRSk7XG4gIGF3YWl0IHdhaXRGb3JJbmRleChpbmRleCk7XG4gIHJldHVybiBpbmRleDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcnhpdk1ldGFkYXRhIHtcbiAgcGFwZXJJZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBhdXRob3JzOiBzdHJpbmdbXTtcbiAgY2F0ZWdvcmllczogc3RyaW5nW107XG4gIHB1Ymxpc2hlZDogc3RyaW5nO1xuICBzdW1tYXJ5Pzogc3RyaW5nO1xuICB1cmw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbmRleEFyeGl2UGFwZXIoY29udGVudDogc3RyaW5nLCBtZXRhZGF0YTogQXJ4aXZNZXRhZGF0YSkge1xuICBjb25zdCBpbmRleCA9IGF3YWl0IGluaXRpYWxpemVJbmRleCgpO1xuICBjb25zdCBlbWJlZGRpbmcgPSBhd2FpdCBlbWJlZGRpbmdzLmVtYmVkUXVlcnkoY29udGVudCk7XG4gIFxuICBhd2FpdCBpbmRleC51cHNlcnQoW3tcbiAgICBpZDogbWV0YWRhdGEucGFwZXJJZCxcbiAgICB2YWx1ZXM6IGVtYmVkZGluZyxcbiAgICBtZXRhZGF0YToge1xuICAgICAgLi4ubWV0YWRhdGEsXG4gICAgICBjb250ZW50XG4gICAgfVxuICB9XSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeVZlY3RvclN0b3JlKHF1ZXJ5OiBzdHJpbmcsIHRvcEs6IG51bWJlciA9IDMpIHtcbiAgY29uc3QgaW5kZXggPSBhd2FpdCBpbml0aWFsaXplSW5kZXgoKTtcbiAgY29uc3QgcXVlcnlFbWJlZGRpbmcgPSBhd2FpdCBlbWJlZGRpbmdzLmVtYmVkUXVlcnkocXVlcnkpO1xuICBcbiAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGluZGV4LnF1ZXJ5KHtcbiAgICB2ZWN0b3I6IHF1ZXJ5RW1iZWRkaW5nLFxuICAgIHRvcEssXG4gICAgaW5jbHVkZU1ldGFkYXRhOiB0cnVlLFxuICB9KTtcbiAgXG4gIHJldHVybiByZXN1bHRzLm1hdGNoZXMgfHwgW107XG59Il0sIm5hbWVzIjpbImRvdGVudiIsIlBpbmVjb25lIiwiT3BlbkFJRW1iZWRkaW5ncyIsImNvbmZpZyIsInBhdGgiLCJwcm9jZXNzIiwiZW52IiwiUElORUNPTkVfQVBJX0tFWSIsIkVycm9yIiwiT1BFTkFJX0FQSV9LRVkiLCJQSU5FQ09ORV9JTkRFWF9OQU1FIiwicGluZWNvbmUiLCJhcGlLZXkiLCJlbWJlZGRpbmdzIiwib3BlbkFJQXBpS2V5Iiwid2FpdCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Iiwid2FpdEZvckluZGV4IiwiaW5kZXgiLCJtYXhSZXRyaWVzIiwiaSIsImRlc2NyaWJlSW5kZXhTdGF0cyIsImVycm9yIiwiZGVsYXkiLCJNYXRoIiwicG93IiwiY29uc29sZSIsImxvZyIsImluaXRpYWxpemVJbmRleCIsImluZGV4TGlzdCIsImxpc3RJbmRleGVzIiwiaW5kZXhlcyIsImZpbmQiLCJuYW1lIiwiY3JlYXRlSW5kZXgiLCJkaW1lbnNpb24iLCJtZXRyaWMiLCJzcGVjIiwic2VydmVybGVzcyIsImNsb3VkIiwicmVnaW9uIiwiSW5kZXgiLCJpbmRleEFyeGl2UGFwZXIiLCJjb250ZW50IiwibWV0YWRhdGEiLCJlbWJlZGRpbmciLCJlbWJlZFF1ZXJ5IiwidXBzZXJ0IiwiaWQiLCJwYXBlcklkIiwidmFsdWVzIiwicXVlcnlWZWN0b3JTdG9yZSIsInF1ZXJ5IiwidG9wSyIsInF1ZXJ5RW1iZWRkaW5nIiwicmVzdWx0cyIsInZlY3RvciIsImluY2x1ZGVNZXRhZGF0YSIsIm1hdGNoZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/pinecone.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/@pinecone-database","vendor-chunks/@langchain","vendor-chunks/openai","vendor-chunks/semver","vendor-chunks/zod-to-json-schema","vendor-chunks/langsmith","vendor-chunks/form-data-encoder","vendor-chunks/@cfworker","vendor-chunks/uuid","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/retry","vendor-chunks/p-queue","vendor-chunks/js-tiktoken","vendor-chunks/tr46","vendor-chunks/dotenv","vendor-chunks/zod","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/p-timeout","vendor-chunks/p-retry","vendor-chunks/p-finally","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/eventemitter3","vendor-chunks/event-target-shim","vendor-chunks/decamelize","vendor-chunks/camelcase","vendor-chunks/base64-js","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fclaraeverett%2FDesktop%2Fperplexity%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fclaraeverett%2FDesktop%2Fperplexity&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();